<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mi Perfil - Gestiona tu cuenta en Ecofor Market">
    <title>Mi Perfil - Ecofor Market</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .hero-perfil {
            background: linear-gradient(135deg, #0B3C2F 0%, #25D366 100%);
            color: white;
            padding: 4rem 0;
            position: relative;
        }
        
        .hero-perfil h1 {
            font-size: 3rem;
            font-weight: 700;
            margin: 0;
        }

        .perfil-container {
            max-width: 900px;
            margin: -3rem auto 3rem;
            position: relative;
            z-index: 10;
        }

        .perfil-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .perfil-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .perfil-avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #0B3C2F 0%, #25D366 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            margin: 0 auto 1rem;
            font-weight: 600;
        }

        .perfil-username {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0B3C2F;
            margin-bottom: 0.5rem;
        }

        .perfil-email {
            color: #666;
            font-size: 1rem;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #0B3C2F;
            margin: 2rem 0 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #25D366;
        }

        .form-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .form-control {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 0.75rem 1rem;
            transition: all 0.3s;
        }

        .form-control:focus {
            border-color: #25D366;
            box-shadow: 0 0 0 0.2rem rgba(37, 211, 102, 0.15);
        }

        .btn-guardar {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            border: none;
            padding: 1rem 3rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
        }

        .btn-guardar:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
            background: linear-gradient(135deg, #128C7E 0%, #075E54 100%);
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #25D366;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .info-box p {
            margin: 0;
            color: #666;
            font-size: 0.95rem;
        }

        .fecha-registro {
            text-align: center;
            color: #999;
            font-size: 0.9rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #f0f0f0;
        }

        @media (max-width: 768px) {
            .perfil-card {
                padding: 1.5rem;
            }

            .hero-perfil h1 {
                font-size: 2rem;
            }

            .perfil-avatar {
                width: 90px;
                height: 90px;
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="top-bar">
        <div class="container-fluid">
            <div class="header-content" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0;">
                <div style="display: flex; align-items: center; gap: 1.5rem;">
                    <div class="logo">
                        <img src="img/LOGO MARKET.png" alt="Ecofor Market Logo" style="height: 60px; width: auto;">
                    </div>
                    <div style="display: flex; gap: 1rem; font-size: 0.95rem;">
                        <span>üìû 41 266 5300</span>
                        <span>üìß contacto@ecoformarket.cl</span>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <!-- Bot√≥n de Usuario / Login -->
                    <div class="dropdown">
                        <a href="#" id="userLoginBtn" data-bs-toggle="modal" data-bs-target="#loginModal" class="btn btn-outline-primary" style="display: flex; align-items: center; gap: 8px;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                            </svg>
                            <span id="userNameDisplay">Iniciar Sesi√≥n</span>
                        </a>
                        <!-- Dropdown Menu (Bootstrap lo muestra/oculta autom√°ticamente) -->
                        <ul class="dropdown-menu dropdown-menu-end" id="userDropdownMenu">
                            <li>
                                <a class="dropdown-item" href="perfil.html" style="display: flex; align-items: center; gap: 8px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                                    </svg>
                                    Mis Datos
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item" href="#" onclick="cerrarSesionDropdown(event)" style="display: flex; align-items: center; gap: 8px; color: #dc3545;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                                        <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                                    </svg>
                                    Cerrar Sesi√≥n
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- Bot√≥n de Carrito -->
                    <a href="#" data-bs-toggle="modal" data-bs-target="#carritoModal" class="btn btn-primary" style="display: flex; align-items: center; gap: 8px;" title="Mi Carrito">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                        </svg>
                        <span id="carrito-count" style="background: white; color: var(--color-primary); border-radius: 50%; width: 22px; height: 22px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold;">0</span>
                    </a>
                </div>

                <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
            </div>
        </div>
    </div>

    <nav id="mainNav">
        <ul>
            <li><a href="index.html">INICIO</a></li>
            <li><a href="https://3d4e9f7e-bb72-4b68-8637-76fdc38e394d.filesusr.com/ugd/a56f3c_4c618c1961534d19948f41d4232377ba.pdf" target="_blank">CAT√ÅLOGO</a></li>
            <li><a href="productos.html">PRODUCTOS</a></li>
            <li><a href="nosotros.html">NOSOTROS</a></li>
            <li><a href="contacto.html">CONTACTO</a></li>
        </ul>
    </nav>

    <!-- Hero Section -->
    <section class="hero-perfil">
        <div class="container text-center">
            <h1>Mi Perfil</h1>
            <p style="font-size: 1.1rem; margin-top: 1rem; opacity: 0.9;">Gestiona tu informaci√≥n personal</p>
        </div>
    </section>

    <!-- Perfil Content -->
    <div class="perfil-container">
        <div class="perfil-card">
            <!-- Loading State -->
            <div id="loadingPerfil" class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Cargando...</span>
                </div>
                <p class="mt-3 text-muted">Cargando tu perfil...</p>
            </div>

            <!-- Perfil Content -->
            <div id="perfilContent" style="display: none;">
                <!-- Header del Perfil -->
                <div class="perfil-header">
                    <div class="perfil-avatar" id="perfilAvatar">
                        <span id="avatarInitials">U</span>
                    </div>
                    <h2 class="perfil-username" id="perfilUsername">Usuario</h2>
                    <p class="perfil-email" id="perfilEmailDisplay">email@ejemplo.com</p>
                </div>

                <!-- Info Box -->
                <div class="info-box">
                    <p>üí° <strong>Tip:</strong> Mant√©n tus datos actualizados para recibir un mejor servicio y promociones personalizadas.</p>
                </div>

                <!-- Formulario de Edici√≥n -->
                <form id="perfilForm">
                    <!-- Datos Personales -->
                    <h3 class="section-title">üë§ Datos Personales</h3>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="firstName" class="form-label">Nombre *</label>
                            <input type="text" class="form-control" id="firstName" required>
                        </div>
                        <div class="col-md-6">
                            <label for="lastName" class="form-label">Apellido *</label>
                            <input type="text" class="form-control" id="lastName" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email *</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>

                    <div class="mb-3">
                        <label for="username" class="form-label">Nombre de Usuario</label>
                        <input type="text" class="form-control" id="username" readonly style="background-color: #f8f9fa; cursor: not-allowed;">
                        <small class="text-muted">El nombre de usuario no se puede modificar</small>
                    </div>

                    <!-- Informaci√≥n de Contacto -->
                    <h3 class="section-title">üì± Informaci√≥n de Contacto</h3>
                    
                    <div class="mb-3">
                        <label for="telefono" class="form-label">Tel√©fono</label>
                        <input type="tel" class="form-control" id="telefono" placeholder="+56 9 1234 5678">
                    </div>

                    <div class="mb-3">
                        <label for="direccion" class="form-label">Direcci√≥n</label>
                        <textarea class="form-control" id="direccion" rows="2" placeholder="Calle, n√∫mero, depto/casa"></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="ciudad" class="form-label">Ciudad</label>
                        <input type="text" class="form-control" id="ciudad" placeholder="Talcahuano, Concepci√≥n, etc.">
                    </div>

                    <!-- Bot√≥n de Acci√≥n -->
                    <div class="d-flex justify-content-center align-items-center mt-4">
                        <button type="submit" class="btn-guardar">
                            üíæ Guardar Cambios
                        </button>
                    </div>
                </form>

                <!-- Fecha de Registro -->
                <div class="fecha-registro">
                    <p>üìÖ Miembro desde: <strong id="fechaRegistro">-</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-nosotros" style="background: #1a1a1a; color: white; padding: 3rem 0; margin-top: 4rem;">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h4 style="color: #25D366;">Ecofor Market</h4>
                    <p>Tu aliado en productos de higiene y limpieza profesional.</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h5>Contacto</h5>
                    <p>üìû 41 266 5300<br>
                    üìß contacto@ecoformarket.cl<br>
                    üìç Talcahuano, Chile</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h5>S√≠guenos</h5>
                    <div class="social-icons" style="display: flex; gap: 1rem; justify-content: start;">
                        <a href="https://www.facebook.com/profile.php?id=61569678489726" target="_blank" style="width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: white; transition: all 0.3s;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        </a>
                        <a href="https://www.instagram.com/ecoformarket/" target="_blank" style="width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); transition: all 0.3s;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="text-center mt-3 pt-3" style="border-top: 1px solid rgba(255,255,255,0.1);">
                <p>&copy; 2024 Ecofor Market. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <a href="https://wa.me/56942009393" target="_blank" class="whatsapp-button" id="whatsappBtn" style="position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 6px 25px rgba(37, 211, 102, 0.5); z-index: 1000; transition: all 0.3s; text-decoration: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24" fill="white">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
    </a>

    <style>
        .whatsapp-button:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 30px rgba(37, 211, 102, 0.6);
        }

        .whatsapp-button svg {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .social-icons a:hover {
            transform: translateY(-5px) scale(1.1);
        }
    </style>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: #0B3C2F; color: white;">
                    <h5 class="modal-title">Iniciar Sesi√≥n</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label class="form-label">Email:</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Contrase√±a:</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <hr>
                        <p class="text-center">¬øNo tienes cuenta? <a href="#" data-bs-toggle="modal" data-bs-target="#registroModal" onclick="bootstrap.Modal.getInstance(document.getElementById('loginModal')).hide()"><strong>Reg√≠strate aqu√≠</strong></a></p>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="iniciarSesion()">Iniciar Sesi√≥n</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Registro Modal -->
    <div class="modal fade" id="registroModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: #0B3C2F; color: white;">
                    <h5 class="modal-title">Crear Cuenta</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="registroForm">
                        <div class="mb-3">
                            <label class="form-label">Email:</label>
                            <input type="email" class="form-control" id="regEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Usuario:</label>
                            <input type="text" class="form-control" id="regUsername" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="regNombre">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Apellido:</label>
                            <input type="text" class="form-control" id="regApellido">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Contrase√±a:</label>
                            <input type="password" class="form-control" id="regPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Confirmar Contrase√±a:</label>
                            <input type="password" class="form-control" id="regPasswordConfirm" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="crearCuenta()">Registrarse</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Carrito Modal -->
    <div class="modal fade" id="carritoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background: #0B3C2F; color: white;">
                    <h5 class="modal-title">Mi Carrito</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="carritoContent"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Seguir Comprando</button>
                    <button type="button" class="btn btn-primary" onclick="procederAlPago()">Proceder al Pago</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/perfil.js"></script>
</body>
</html>

